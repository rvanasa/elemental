{"version":3,"sources":["services/colors.js","services/world.js","contexts/WorldContext.js","components/Loading.js","contexts/UserContext.js","firebase.js","firebaseConfig.js","services/user.js","hooks/useListener.js","contexts/SelectionContext.js","hooks/useRedraw.js","components/Element.js","components/ElementText.js","components/Recipe.js","components/ColorOption.js","components/ElementEditor.js","components/page/HistoryPage.js","components/page/GamePage.js","components/page/LoginPage.js","components/ElementDetail.js","components/App.js","serviceWorker.js","index.js"],"names":["COLORS","shallowReplace","to","from","Object","keys","forEach","k","hasOwnProperty","assign","World","primitives","elements","elementByName","recipes","element","id","Error","name","JSON","stringify","this","prev","local","emit","WORLD_ELEMENT_CHANGE","recipe","key","getRecipeKey","parent1","parent2","WORLD_RECIPE_CHANGE","a","b","child","notifyElement","uuidv4","color","Math","random","notifyRecipe","EventEmitter","world","Promise","fetch","process","then","res","json","all","es","rs","e","String","cleanupElementName","primitive","push","sort","r","getElement","capitalCase","replace","React","undefined","Loading","message","className","app","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","API_URL","firestore","REACT_APP_API_URL","axios","interceptors","request","use","config","currentUser","getIdToken","headers","Authorization","User","storageKey","data","inventory","knownElementIDs","account","onAuthStateChanged","setAccount","_savePromise","signInAnonymously","user","console","log","isAnonymous","warn","submitted","findAccountOrLogin","post","indexOf","response","amount","getItemCount","getInventory","count","save","catch","error","includes","getKnownElementIDs","hasItem","item","localStorage","parse","resolve","reject","setTimeout","load","window","USER","GIVE","useListener","target","event","listener","options","domTarget","useEffect","addEventListener","addListener","removeEventListener","removeListener","useRedraw","redraw","useState","ICONS","FiWind","GiStoneBlock","FaFire","GiWaterDrop","Element","compact","onDrop","onClick","useContext","WorldContext","SelectionContext","setSelected","selected","useDrag","type","collect","monitor","isDragging","drag","useDrop","accept","canDrop","getRecipe","drop","isDropping","isOver","dropRecipe","getItem","isDark","Color","textColor","style","width","height","verticalAlign","lineHeight","background","fontSize","borderRadius","boxShadow","textShadow","overflowWrap","transform","elem","Icon","ref","classNames","stopPropagation","maxFontSize","minFontSize","opacity","ElementText","children","Recipe","ColorOption","active","onSelect","transition","preventDefault","ElementEditor","template","onSubmit","setName","setColor","attempted","setAttempted","trim","length","Form","Button","variant","size","cancel","Group","Label","Control","autoFocus","autoComplete","placeholder","value","onKeyDown","which","onChange","flatMap","c","i","floor","HistoryPage","UserContext","Container","fluid","map","filter","asc","GamePage","setInventory","setRecipe","suggesting","setSuggesting","showingHistory","setShowingHistory","primitiveElements","updateInventory","removeItem","suggest","InventoryElement","removeItemsWithId","props","usable","addRecipe","addItem","tryCombine","LoginPage","ElementDetail","onClose","hasKnownElement","App","setWorld","setUser","findWorld","findUser","HTML5toTouch","Provider","zIndex","path","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1e73e3d3.chunk.js","sourcesContent":["export const COLORS = [\r\n    '#950909', '#FB5757', '#FF934C', '#5E2F00', '#D5B89B',\r\n    '#F5FF20', '#808000', '#00FF00', '#318327', '#A7C8DC',\r\n    '#4C93FF', '#103FBA', '#D2B9F9', '#8B27C0', '#FFFFFF',\r\n    '#B2B2B2', '#757575', '#000000', '#FF00FF', '#FFC1DC',\r\n];\r\n","import EventEmitter from 'events';\r\nimport {capitalCase} from 'change-case';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport {COLORS} from './colors';\r\n\r\nconst WORLD_ELEMENT_CHANGE = 'element';\r\nconst WORLD_RECIPE_CHANGE = 'recipe';\r\n\r\nfunction shallowReplace(to, from) {\r\n    Object.keys(to).forEach(k => {\r\n        if(!from.hasOwnProperty(k)) {\r\n            delete to[k];\r\n        }\r\n    });\r\n    return Object.assign(to, from);\r\n}\r\n\r\nclass World extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.primitives = [];\r\n        this.elements = {};\r\n        this.elementByName = {};\r\n        this.recipes = {};\r\n    }\r\n\r\n    notifyElement(element) {\r\n        if(!element.id) {\r\n            throw new Error(`Element [${element.name || JSON.stringify(element)}] requires 'id' property`);\r\n        }\r\n        if(this.elements.hasOwnProperty(element.id)) {\r\n            let prev = this.elements[element.id];\r\n            if(!element.local && this.elementByName[prev.name] === this) {\r\n                delete this.elementByName[element.id];\r\n            }\r\n            element = shallowReplace(prev, element);\r\n        }\r\n        else {\r\n            this.elements[element.id] = element;\r\n        }\r\n        if(!element.local) {\r\n            this.elementByName[element.name] = element;\r\n        }\r\n        this.emit(WORLD_ELEMENT_CHANGE, element);\r\n        this.emit(WORLD_ELEMENT_CHANGE + ':' + element.id, element);\r\n        return element;\r\n    }\r\n\r\n    notifyRecipe(recipe) {\r\n        let key = this.getRecipeKey(recipe.parent1, recipe.parent2);\r\n        if(!key) {\r\n            throw new Error(`Recipe has invalid parent elements`);\r\n        }\r\n        if(this.recipes.hasOwnProperty(key)) {\r\n            recipe = shallowReplace(this.recipes[key], recipe);\r\n        }\r\n        else {\r\n            this.recipes[key] = recipe;\r\n        }\r\n        this.emit(WORLD_RECIPE_CHANGE, recipe);\r\n        this.emit(WORLD_RECIPE_CHANGE + ':' + key, recipe);\r\n        return recipe;\r\n    }\r\n\r\n    getElement(id) {\r\n        return this.elements[id] || null;\r\n    }\r\n\r\n    getElementByName(name) {\r\n        return this.elementByName.hasOwnProperty(name) ? this.elementByName[name] : null;\r\n    }\r\n\r\n    getRecipeKey(a, b) {\r\n        if(!a.id || !b.id) {\r\n            return null;\r\n        }\r\n        if(a.id > b.id) {\r\n            [a, b] = [b, a];\r\n        }\r\n        return a.id + '+' + b.id;\r\n    }\r\n\r\n    getRecipe(a, b) {\r\n        return this.recipes[this.getRecipeKey(a, b)] || null;\r\n    }\r\n\r\n    addRecipe(a, b) {\r\n        if(a.id > b.id) {\r\n            [a, b] = [b, a];\r\n        }\r\n        let child = this.notifyElement({\r\n            id: uuidv4(),\r\n            name: a.name + ' + ' + b.name,\r\n            color: Math.random() < .5 ? a.color : b.color,\r\n            local: true,\r\n        });\r\n        let recipe = this.notifyRecipe({\r\n            id: uuidv4(),\r\n            parent1: a,\r\n            parent2: b,\r\n            child,\r\n            local: true,\r\n        });\r\n        recipe.child.recipe = recipe;\r\n\r\n        return recipe;\r\n    }\r\n\r\n    // updateElement(element){\r\n    //     this.emit('element')\r\n    // }\r\n}\r\n\r\nlet world = null;\r\n\r\nexport async function findWorld() {\r\n    if(!world) {\r\n        let [es, rs] = await Promise.all([\r\n            await fetch(process.env.PUBLIC_URL + '/data/Elements.json').then(res => res.json()),\r\n            await fetch(process.env.PUBLIC_URL + '/data/Recipes.json').then(res => res.json()),\r\n        ]);\r\n\r\n        world = new World();\r\n\r\n        es.forEach(e => {\r\n            e.id = String(e.id);\r\n            e.name = cleanupElementName(e.name) || `(Element #${e.id})`;\r\n            e.color = COLORS[e.color];\r\n            e.primitive = e.id < 4;\r\n            world.notifyElement(e);\r\n            if(e.primitive) {\r\n                world.primitives.push(e);\r\n                world.primitives.sort((a, b) => a.id > b.id ? 1 : a.id < b.id ? -1 : 0);\r\n            }\r\n        });\r\n        rs.forEach(r => {\r\n            if(r.parent1 === r.child || r.parent2 === r.child) {\r\n                return;\r\n            }\r\n            if(r.child < 4) {\r\n                return;\r\n            }\r\n            r.parent1 = world.getElement(r.parent1);\r\n            r.parent2 = world.getElement(r.parent2);\r\n            r.child = world.getElement(r.child);\r\n\r\n            world.notifyRecipe(r);\r\n        });\r\n    }\r\n    return world;\r\n}\r\n\r\nexport function cleanupElementName(name) {\r\n    return capitalCase(name.replace(/[']/, ''));\r\n}","import * as React from 'react';\r\n\r\nexport default React.createContext(undefined);\r\n","import * as React from 'react';\r\n\r\nexport default function Loading({message}) {\r\n\r\n    return (\r\n        <div>\r\n            <h4 className=\"text-muted text-center pt-5\">\r\n                {message || 'Loading...'}\r\n            </h4>\r\n        </div>\r\n    );\r\n}","import * as React from 'react';\r\n\r\nexport default React.createContext(undefined);\r\n","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\nimport firebaseConfig from './firebaseConfig';\r\n\r\nexport const app = firebase.initializeApp(firebaseConfig);\r\n\r\nexport const auth = app.auth();\r\n\r\nexport const db = app.firestore();\r\n","export default {\r\n    apiKey: 'AIzaSyCTwBdOnne9_EsQm5U7X1numBUAljUSPOA',\r\n    authDomain: 'elemental-exchange.firebaseapp.com',\r\n    databaseURL: 'https://elemental-exchange.firebaseio.com',\r\n    projectId: 'elemental-exchange',\r\n    storageBucket: 'elemental-exchange.appspot.com',\r\n    messagingSenderId: '442567411353',\r\n    appId: '1:442567411353:web:78ea9bb9ea809f14281a08',\r\n    measurementId: 'G-F395HHHFB4'\r\n};\r\n","import EventEmitter from 'events';\r\nimport axios from 'axios';\r\nimport {auth} from '../firebase';\r\nimport {COLORS} from './colors';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || '';\r\n\r\naxios.interceptors.request.use(async config => {\r\n    config.headers.Authorization = 'Bearer ' + await auth.currentUser.getIdToken();\r\n    return config;\r\n});\r\n\r\nclass User extends EventEmitter {\r\n    constructor(storageKey = 'user') {\r\n        super();\r\n\r\n        this.storageKey = storageKey;\r\n        this.data = {\r\n            name: null,\r\n            inventory: {},\r\n            knownElementIDs: [],\r\n        };\r\n\r\n        this.account = auth.currentUser;\r\n        auth.onAuthStateChanged((account) => this.setAccount(account));\r\n\r\n        this._savePromise = null;\r\n    }\r\n\r\n    isLoggedIn() {\r\n        return !!this.account;\r\n    }\r\n\r\n    async findAccountOrLogin() {\r\n        if(!this.account) {\r\n            this.account = (await auth.signInAnonymously()).user;\r\n            console.log('Signed in anonymously');\r\n        }\r\n        return this.account;\r\n    }\r\n\r\n    setAccount(account) {\r\n        this.account = account;\r\n        this.emit('account', account);\r\n    }\r\n\r\n    hasIdentity() {\r\n        return this.account && !this.account.isAnonymous;\r\n    }\r\n\r\n    async suggest(element) {\r\n        if(!element.recipe) {\r\n            console.warn('Tried to suggest element without recipe');\r\n            return;\r\n        }\r\n\r\n        console.log(element.submitted ? 'Updating' : 'Adding', 'suggestion:', element);\r\n        if(element.recipe) {\r\n            let {recipe} = element;\r\n            await this.findAccountOrLogin();/////\r\n            let response = await axios.post(API_URL + '/suggest-element', {\r\n                parent1: recipe.parent1.id,\r\n                parent2: recipe.parent2.id,\r\n                name: element.name,\r\n                color: COLORS.indexOf(element.color),\r\n            });\r\n            console.log(response);///\r\n            element.submitted = true;\r\n        }\r\n    }\r\n\r\n    getName() {\r\n        return this.data.name;\r\n    }\r\n\r\n    getInventory() {\r\n        return this.data.inventory;\r\n    }\r\n\r\n    hasItem(element, amount = 1) {\r\n        return element.primitive || this.getItemCount(element) >= amount;\r\n    }\r\n\r\n    getItemCount(element) {\r\n        return this.getInventory()[element.id];\r\n    }\r\n\r\n    removeItem(element, amount = 1) {\r\n        if(element.primitive) {\r\n            return true;\r\n        }\r\n        let inventory = this.getInventory();\r\n        if(inventory.hasOwnProperty(element.id)) {\r\n            let count = inventory[element.id] - amount;\r\n            if(count > 0) {\r\n                inventory[element.id] = count;\r\n            }\r\n            else {\r\n                delete inventory[element.id];\r\n            }\r\n            this.save().catch(console.error);\r\n            return count >= 0;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    removeItemsWithId(id) {\r\n        let inventory = this.getInventory();\r\n        if(inventory.hasOwnProperty(id)) {\r\n            delete inventory[id];\r\n            this.save().catch(console.error);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    addItem(element, amount = 1) {\r\n        if(element.primitive) {\r\n            return true;\r\n        }\r\n        let inventory = this.getInventory();\r\n        if(!inventory.hasOwnProperty(element.id)) {\r\n            inventory[element.id] = amount;\r\n        }\r\n        else {\r\n            inventory[element.id] += amount;\r\n        }\r\n        if(!this.data.knownElementIDs.includes(element.id)) {\r\n            this.data.knownElementIDs.push(element.id);\r\n        }\r\n        this.save().catch(console.error);\r\n        return true;\r\n    }\r\n\r\n    getKnownElementIDs() {\r\n        return this.data.knownElementIDs;\r\n    }\r\n\r\n    hasKnownElement(element) {\r\n        return element && (this.getKnownElementIDs().includes(element.id) || this.hasItem(element));\r\n    }\r\n\r\n    async load() {\r\n        this.emit('load', this);\r\n        let item = localStorage[this.storageKey];\r\n        if(item) {\r\n            Object.assign(this.data, JSON.parse(item));\r\n        }\r\n\r\n        console.log('Loaded:', this.data);\r\n    }\r\n\r\n    async save() {\r\n        this.emit('save', this);\r\n        if(this.data) {\r\n            if(!this._savePromise) {\r\n                this._savePromise = new Promise((resolve, reject) => {\r\n                    setTimeout(() => {\r\n                        this._savePromise = null;\r\n                        try {\r\n                            localStorage[this.storageKey] = JSON.stringify(this.data);\r\n                            resolve();\r\n                        }\r\n                        catch(e) {\r\n                            reject(e);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            return this._savePromise;\r\n        }\r\n    }\r\n}\r\n\r\nlet user = null;\r\n\r\nexport async function findUser() {\r\n    if(!user) {\r\n        user = new User();\r\n        await user.load();\r\n    }\r\n    return user;\r\n}\r\n\r\nwindow.USER = () => user;\r\n\r\nwindow.GIVE = function(id, count = 1) {\r\n    user.inventory[id] = (user.inventory[id] || 0) + count;\r\n};","import {useEffect} from 'react';\r\n\r\nexport default function useListener(target, event, listener, options) {\r\n\r\n    let domTarget = target.hasOwnProperty('addEventListener');\r\n\r\n    useEffect(() => {\r\n        if(domTarget) {\r\n            target.addEventListener(event, listener, options);\r\n        }\r\n        else {\r\n            target.addListener(event, listener, options);\r\n        }\r\n        return () => {\r\n            if(domTarget) {\r\n                target.removeEventListener(event, listener);\r\n            }\r\n            else {\r\n                target.removeListener(event, listener);\r\n            }\r\n        };\r\n    });\r\n\r\n    return listener;\r\n}\r\n","import * as React from 'react';\r\n\r\nexport default React.createContext(undefined);\r\n","import {useState} from 'react';\r\n\r\nexport default function useRedraw() {\r\n\r\n    let redraw = useState({})[1];\r\n\r\n    return () => redraw({});\r\n}\r\n","import React, {useContext, useState} from 'react';\r\n\r\nimport WorldContext from '../contexts/WorldContext';\r\nimport ScaleText from 'react-scale-text';\r\nimport Color from 'color';\r\nimport classNames from 'classnames';\r\nimport {useDrag, useDrop} from 'react-dnd';\r\nimport {FaFire, FiWind, GiStoneBlock, GiWaterDrop} from 'react-icons/all';\r\nimport useListener from '../hooks/useListener';\r\nimport './Element.scss';\r\nimport SelectionContext from '../contexts/SelectionContext';\r\nimport useRedraw from '../hooks/useRedraw';\r\n\r\nconst ICONS = [FiWind, GiStoneBlock, FaFire, GiWaterDrop];\r\n\r\nexport default function Element({element, count, compact, onDrop, onClick}) {\r\n\r\n    let redraw = useRedraw();\r\n\r\n    let world = useContext(WorldContext);\r\n    let {selected, setSelected} = useContext(SelectionContext);\r\n\r\n    useListener(world, 'element:' + element.id, redraw);\r\n\r\n    let [{isDragging}, drag] = useDrag({\r\n        item: {\r\n            type: 'ELEMENT',\r\n            element,\r\n            count,\r\n        },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        }),\r\n    });\r\n    let [{isDropping, dropRecipe/*, dropItem*/}, drop] = useDrop({\r\n        accept: ['ELEMENT'],\r\n        canDrop(item) {\r\n            if(!world.getRecipe(element, item.element)) {\r\n                return false;\r\n            }\r\n            return !element.local && !item.element.local;\r\n        },\r\n        drop(item) {\r\n            onDrop && onDrop(item);\r\n        },\r\n        collect: (monitor) => ({\r\n            isDropping: monitor.isOver() && monitor.canDrop(),\r\n            dropRecipe: monitor.getItem() && world.getRecipe(element, monitor.getItem().element),\r\n            // dropItem: monitor.getItem(),\r\n        }),\r\n    });\r\n\r\n    let elementColor = Color(element.color);\r\n    let isDark = elementColor.isDark();\r\n    let textColor = isDark ? '#FFF' : '#000';\r\n\r\n    let style = {\r\n        width: 80,\r\n        height: compact ? 40 : 80,\r\n        verticalAlign: 'top',\r\n        lineHeight: 1,\r\n        background: element.color,\r\n        color: textColor,\r\n        fontSize: 20,\r\n        borderRadius: 8,\r\n        boxShadow: '1px 4px #0004',\r\n        textShadow: isDark && '1px 2px #0004',\r\n        overflowWrap: 'break-word',\r\n        transform: onDrop && (isDragging || (isDropping && dropRecipe && !dropRecipe.local)) && 'scale(.8)',\r\n        // animation: 'element-wiggle .5s ease-out',\r\n    };\r\n\r\n    onClick = onClick || (elem => !elem.primitive && setSelected(/*selected === elem ? null : */elem));////////////\r\n\r\n    let Icon = ICONS[element.id];\r\n\r\n    return (\r\n        <span ref={onDrop && drop} className=\"d-inline-block p-1\">\r\n            <span ref={onDrop && drag}\r\n                  className={classNames('d-inline-block p-1 text-center noselect', (onDrop && 'grabbable') || (onClick && 'clickable'))}\r\n                  style={style}\r\n                  onClick={e => onClick && (e.stopPropagation() & onClick(element))}>\r\n                <div className=\"d-inline-block\" style={{height: 40}}>\r\n                    <ScaleText maxFontSize={20} minFontSize={14}>{element.name || '(?)'}</ScaleText>\r\n                </div>\r\n                {!compact && (\r\n                    <div className=\"h5\" style={{opacity: .8}}>\r\n                        {count ? <><small>x</small>{count}</> : Icon && <Icon/>}\r\n                    </div>\r\n                )}\r\n            </span>\r\n        </span>\r\n    );\r\n};\r\n","import React from 'react';\r\n\r\nexport default function ElementText({children}) {\r\n\r\n    return (\r\n        <span className=\"text-secondary noselect\" style={{fontSize: 40}}>\r\n            {children}\r\n        </span>\r\n    );\r\n};\r\n","import * as React from 'react';\r\nimport Element from './Element';\r\nimport ElementText from './ElementText';\r\n\r\nexport default function Recipe({recipe, child, compact}) {\r\n    return (\r\n        <div className=\"d-flex align-items-center\">\r\n            <Element element={recipe.parent1} compact={compact}/>\r\n            <ElementText>+</ElementText>\r\n            <Element element={recipe.parent2} compact={compact}/>\r\n            <ElementText>=</ElementText>\r\n            <Element element={child || recipe.child} compact={compact}/>\r\n        </div>\r\n    );\r\n}","import * as React from 'react';\r\n\r\nexport default function ColorOption({color, active, onSelect}) {\r\n\r\n    let style = {\r\n        width: 30,\r\n        height: 30,\r\n        background: color,\r\n        transition: 'transform .1s ease-out',\r\n        transform: active && 'scale(.5)',\r\n    };\r\n\r\n    return (\r\n        <div className=\"d-inline-block clickable p-1\" onClick={e => e.preventDefault() & onSelect(color)}>\r\n            <div className=\"d-inline-block rounded-sm\" style={style}/>\r\n        </div>\r\n    );\r\n}","import * as React from 'react';\r\nimport {useState} from 'react';\r\nimport Recipe from './Recipe';\r\nimport {Button, Form} from 'react-bootstrap';\r\nimport ColorOption from './ColorOption';\r\nimport {COLORS} from '../services/colors';\r\nimport {cleanupElementName} from '../services/world';\r\n\r\nexport default function ElementEditor({element: template, onSubmit}) {\r\n\r\n    let [name, setName] = useState(String((template.submitted && template.name) || ''));\r\n    let [color, setColor] = useState(template.color);\r\n    let [attempted, setAttempted] = useState(false);\r\n\r\n    if(!color) {\r\n        setColor(COLORS[Math.floor(Math.random() * COLORS.length)]);\r\n        return;\r\n    }\r\n\r\n    // let world = useContext(WorldContext);\r\n\r\n    let element = {\r\n        ...template,\r\n        name: cleanupElementName(name) || template.name || '',\r\n        color,\r\n    };\r\n\r\n    let error = null;\r\n    if(!element.name.trim()) {\r\n        error = 'Please enter an element name.';\r\n    }\r\n    else if(element.name.length > 20) {\r\n        error = 'Name must be 20 characters or less.';\r\n    }\r\n\r\n    function submit(e) {\r\n        e.preventDefault();\r\n        setAttempted(true);\r\n        if(!error) {\r\n            onSubmit && onSubmit(element);\r\n        }\r\n    }\r\n\r\n    function cancel() {\r\n        onSubmit && onSubmit();\r\n    }\r\n\r\n    return (\r\n        <Form className=\"mt-3\"\r\n              onSubmit={submit}>\r\n            <Button variant=\"primary\" size=\"lg\" className=\"w-100\" onClick={cancel}>\r\n                Cancel\r\n            </Button>\r\n            <div className=\"p-2 mb-2\" style={{background: '#0005'}}>\r\n                {element.recipe && (<Recipe recipe={element.recipe} child={element}/>)}\r\n            </div>\r\n            <Form.Group>\r\n                <Form.Label className=\"h4\">What should these create?</Form.Label>\r\n                <Form.Control\r\n                    size=\"lg\"\r\n                    type=\"text\"\r\n                    autoFocus\r\n                    autoComplete=\"off\"\r\n                    placeholder={template.name}\r\n                    value={name}\r\n                    onKeyDown={e => e.which === 27 && cancel()}\r\n                    onChange={e => setName(e.target.value)}\r\n                />\r\n            </Form.Group>\r\n            <div>\r\n                {COLORS.flatMap((c, i) => [\r\n                    <ColorOption key={c} color={c} active={element.color === c} onSelect={() => setColor(c)}/>,\r\n                    ((i + 1) % 10 === 0 && <br key={c + ':' + i}/>),\r\n                ])}\r\n            </div>\r\n\r\n            {/*<Form.Group>*/}\r\n            {/*    <Form.Label>Custom message (optional):</Form.Label>*/}\r\n            {/*    <Form.Control type=\"area\" autoComplete=\"off\" placeholder=\"Type anything you want\"/>*/}\r\n            {/*</Form.Group>*/}\r\n            {/*<Form.Group>*/}\r\n            {/*    <Form.Check type=\"checkbox\" label=\"Check me out\"/>*/}\r\n            {/*</Form.Group>*/}\r\n            <hr className=\"my-2\"/>\r\n            <Button variant=\"primary\" size=\"lg\" type=\"submit\" className=\"w-100 py-2\">\r\n                Submit\r\n            </Button>\r\n            {error && attempted && (\r\n                <p className=\"h5 text-light mt-2\">{error}</p>\r\n            )}\r\n        </Form>\r\n    );\r\n}","import React, {useContext} from 'react';\r\nimport UserContext from '../../contexts/UserContext';\r\nimport WorldContext from '../../contexts/WorldContext';\r\nimport Element from '../Element';\r\nimport {Container} from 'react-bootstrap';\r\nimport sort from 'fast-sort';\r\nimport {COLORS} from '../../services/colors';\r\n\r\nexport default function HistoryPage() {\r\n\r\n    let world = useContext(WorldContext);\r\n    let user = useContext(UserContext);\r\n\r\n    // useListener(user, 'save', () => updateInventory());\r\n\r\n    // function onClick(elem) {\r\n    //     user.addItem(elem);\r\n    // }\r\n\r\n    return (\r\n        <>\r\n            <Container fluid=\"sm\">\r\n                {COLORS.map(color => (\r\n                    <div key={color} className=\"mb-4\">\r\n                        {sort(user.getKnownElementIDs().map(id => world.getElement(id)).filter(element => element && element.color === color)).asc('name').map((element, i) => (\r\n                            <Element\r\n                                key={element.id + ':' + i}\r\n                                element={element}\r\n                                count={user.getItemCount(element)}\r\n                                // onClick={() => onClick(element)}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                ))}\r\n            </Container>\r\n        </>\r\n    );\r\n}","import React, {useContext, useState} from 'react';\r\nimport UserContext from '../../contexts/UserContext';\r\nimport WorldContext from '../../contexts/WorldContext';\r\nimport Element from '../Element';\r\nimport {Button, Container} from 'react-bootstrap';\r\nimport Recipe from '../Recipe';\r\nimport ElementEditor from '../ElementEditor';\r\nimport useListener from '../../hooks/useListener';\r\nimport HistoryPage from './HistoryPage';\r\nimport {\r\n    BiArrowBack,\r\n    BiChevronLeft,\r\n    FaBackward,\r\n    FaCaretRight, FaHistory,\r\n    FaPause,\r\n    FaShoppingBag,\r\n    FaTh, FaTimes,\r\n    HiLibrary\r\n} from 'react-icons/all';\r\n\r\nexport default function GamePage() {\r\n\r\n    let world = useContext(WorldContext);\r\n    let user = useContext(UserContext);\r\n    let [inventory, setInventory] = useState(null);\r\n    let [recipe, setRecipe] = useState(null);\r\n    let [suggesting, setSuggesting] = useState(null);\r\n    let [showingHistory, setShowingHistory] = useState(false);\r\n\r\n    let primitiveElements = world.primitives;\r\n\r\n    useListener(user, 'save', () => updateInventory());\r\n\r\n    if(!inventory) {\r\n        updateInventory();\r\n        return;\r\n    }\r\n\r\n    function updateInventory() {\r\n        let inventory = Object.keys(user.getInventory())\r\n            .map(id => {\r\n                let elem = world.getElement(id);\r\n                if(!elem) {\r\n                    console.log('Missing element:', id);\r\n                    user.removeItemsWithId(id);\r\n                    return null;\r\n                }\r\n                return elem;\r\n            })\r\n            .filter(elem => elem);\r\n\r\n        // sort(inventory).asc([elem => COLORS.indexOf(elem.color) /*Color(elem.color).hue()*/, elem => elem.name]);\r\n\r\n        setInventory(inventory);\r\n\r\n        // setInventory(user.getInventory());///\r\n    }\r\n\r\n    function tryCombine(a, b) {\r\n        if((a === b ? user.hasItem(a, 2) : user.hasItem(a) && user.hasItem(b))) {\r\n            let recipe = world.getRecipe(a, b);\r\n            if(!recipe) {\r\n                recipe = world.addRecipe(a, b);\r\n            }\r\n            if(recipe.local) {\r\n                setSuggesting(recipe.child);\r\n                return;\r\n            }\r\n\r\n            user.removeItem(a);\r\n            user.removeItem(b);\r\n\r\n            let child = recipe.child;\r\n\r\n            user.addItem(child);\r\n            console.log('Crafted:', child.name);\r\n\r\n            setRecipe(recipe);\r\n        }\r\n    }\r\n\r\n    function onSubmit(elem) {\r\n        setSuggesting(null);\r\n        if(elem) {\r\n            elem = world.notifyElement(elem);\r\n            if(elem.recipe) {\r\n                recipe = world.notifyRecipe(elem.recipe);\r\n                setRecipe(recipe);\r\n\r\n                ///\r\n                user.removeItem(recipe.parent1);\r\n                user.removeItem(recipe.parent2);\r\n            }\r\n\r\n            user.suggest(elem)\r\n                .catch(console.error);\r\n\r\n            // console.log(elem);\r\n            // addItem(elem);\r\n        }\r\n    }\r\n\r\n    // function onClick(elem) {\r\n    //     // console.log(elem);\r\n    //     // tryCombine(elem, elem);\r\n    //\r\n    //     // if(elem.recipe) {\r\n    //     //     setRecipe(elem.recipe);\r\n    //     // }\r\n    //\r\n    //     user.addItem(elem, 1);\r\n    // }\r\n\r\n    function InventoryElement({element, ...props}) {\r\n        return <Element\r\n            element={element}\r\n            {...props}\r\n            usable\r\n            // onClick={onClick}\r\n            onDrop={item => tryCombine(element, item.element)}\r\n        />;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {suggesting ? (\r\n                <Container fluid=\"sm\">\r\n                    <ElementEditor element={suggesting} onSubmit={onSubmit}/>\r\n                </Container>\r\n            ) : (\r\n                <>\r\n                    <div className=\"mb-4\" style={{background: '#0005'}}>\r\n                        <div className=\"float-right mt-1 mr-2\">\r\n                            <Button variant=\"primary\" size=\"lg\" className=\"py-2\" onClick={() => setShowingHistory(!showingHistory)}>\r\n                                {showingHistory ? <FaTimes/> : <FaHistory/>}\r\n                            </Button>\r\n                        </div>\r\n                        <Container fluid=\"sm\" style={{height: '4em'}}>\r\n                            {recipe && (\r\n                                <>\r\n                                    <Recipe recipe={recipe} compact/>\r\n                                </>\r\n                            )}\r\n                        </Container>\r\n                    </div>\r\n                    {showingHistory ? (\r\n                        <HistoryPage/>\r\n                    ) : (\r\n                        <Container fluid=\"sm\">\r\n                            <div className=\"mb-4\">\r\n                                {primitiveElements.map(element => (\r\n                                    <InventoryElement key={element.id} element={element}/>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"mb-4\">\r\n                                {/*<Element onDrop={elem=>}></Element>*/}\r\n                                {inventory.map((element, i) => (\r\n                                    <InventoryElement\r\n                                        key={element.id + ':' + i}\r\n                                        element={element}\r\n                                        count={user.getItemCount(element)}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        </Container>\r\n                    )}\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n}","import * as React from 'react';\r\nimport {FaGoogle} from 'react-icons/all';\r\n\r\nexport default function LoginPage() {\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"btn btn-outline-red btn-lg\">\r\n                <FaGoogle/>\r\n                Sign in with Google\r\n            </div>\r\n            <div className=\"btn btn-outline-red btn-lg\">\r\n                Join as guest\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, {useContext, useState} from 'react';\r\n\r\nimport WorldContext from '../contexts/WorldContext';\r\nimport UserContext from '../contexts/UserContext';\r\nimport {FaCross, FaMinus, FaPlus, FaTimes} from 'react-icons/all';\r\nimport './Element.scss';\r\nimport Element from './Element';\r\nimport useListener from '../hooks/useListener';\r\nimport useRedraw from '../hooks/useRedraw';\r\n\r\nexport default function ElementDetail({element, onClose}) {\r\n\r\n    let redraw = useRedraw();\r\n\r\n    let world = useContext(WorldContext);\r\n    let user = useContext(UserContext);\r\n\r\n    useListener(user, 'save', redraw);\r\n\r\n    return (\r\n        <div className=\"p-2 d-flex\">\r\n            <Element element={element} count={user.getItemCount(element)}/>\r\n            <div className=\"mx-3 flex-grow-1\">\r\n                {/*<h3>{element.name}</h3>*/}\r\n                <span className=\"btn btn-outline-secondary text-white\"\r\n                      onClick={() => user.hasKnownElement(element) && user.addItem(element)}>\r\n                    <FaPlus/>\r\n                </span>\r\n                <span className=\"btn btn-outline-secondary text-white\" onClick={() => user.removeItem(element)}>\r\n                    <FaMinus/>\r\n                </span>\r\n            </div>\r\n            {onClose && (\r\n                <div>\r\n                    <span className=\"btn btn-outline-secondary\" onClick={() => onClose()}>\r\n                        <FaTimes/>\r\n                    </span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\n\r\nimport './App.scss';\r\nimport {findWorld} from '../services/world';\r\nimport WorldContext from '../contexts/WorldContext';\r\nimport Loading from './Loading';\r\nimport UserContext from '../contexts/UserContext';\r\nimport {findUser} from '../services/user';\r\nimport {DndProvider} from 'react-dnd-multi-backend';\r\nimport {HashRouter, Route, Switch} from 'react-router-dom';\r\nimport HTML5toTouch from 'react-dnd-multi-backend/dist/esm/HTML5toTouch';\r\nimport GamePage from './page/GamePage';\r\nimport LoginPage from './page/LoginPage';\r\nimport HistoryPage from './page/HistoryPage';\r\nimport SelectionContext from '../contexts/SelectionContext';\r\nimport ElementDetail from './ElementDetail';\r\n\r\nexport default function App() {\r\n\r\n    let [world, setWorld] = useState(null);\r\n    let [user, setUser] = useState(null);\r\n    let [selected, setSelected] = useState(null);\r\n\r\n    useEffect(() => {\r\n        findWorld()\r\n            .then(setWorld)\r\n            .catch(console.error);\r\n\r\n        findUser()\r\n            .then(setUser)\r\n            .catch(console.error);\r\n    }, []);\r\n\r\n    if(!world || !user) {\r\n        return <Loading/>;\r\n    }\r\n\r\n    // function NavButton({to, children}) {\r\n    //     return (\r\n    //         <div className=\"h1 px-2 pb-2 pt-1 mb-0\">\r\n    //             <Link to={to}>\r\n    //                 {children}\r\n    //             </Link>\r\n    //         </div>\r\n    //     );\r\n    // }\r\n\r\n    return (\r\n        <>\r\n            <DndProvider options={HTML5toTouch}>\r\n                <HashRouter>\r\n                    {/*<div className=\"d-flex justify-content-around\">*/}\r\n                    {/*    <NavButton to=\"/\">*/}\r\n                    {/*        <FaTh/>*/}\r\n                    {/*    </NavButton>*/}\r\n                    {/*    <NavButton to=\"/history\">*/}\r\n                    {/*        <FaHistory/>*/}\r\n                    {/*    </NavButton>*/}\r\n                    {/*    <NavButton to=\"/suggestions\">*/}\r\n                    {/*        <FaPen/>*/}\r\n                    {/*    </NavButton>*/}\r\n                    {/*    <NavButton to=\"/user\">*/}\r\n                    {/*        <FaUser/>*/}\r\n                    {/*    </NavButton>*/}\r\n                    {/*</div>*/}\r\n                    <WorldContext.Provider value={world}>\r\n                        <UserContext.Provider value={user}>\r\n                            <SelectionContext.Provider value={{selected, setSelected}}>\r\n                                {selected && (\r\n                                    <div className=\"position-fixed w-100\"\r\n                                         style={{background: '#222', boxShadow: '0 .25em #0008', zIndex: 100}}>\r\n                                        <ElementDetail element={selected} onClose={() => setSelected(null)}/>\r\n                                    </div>\r\n                                )}\r\n                                <div onClick={() => setSelected(null)}>\r\n                                    <Switch>\r\n                                        <Route path=\"/login\">\r\n                                            <LoginPage/>\r\n                                        </Route>\r\n                                        <Route path=\"/history\">\r\n                                            <HistoryPage/>\r\n                                        </Route>\r\n                                        <Route path=\"/\">\r\n                                            <GamePage/>\r\n                                        </Route>\r\n                                    </Switch>\r\n                                </div>\r\n                            </SelectionContext.Provider>\r\n                        </UserContext.Provider>\r\n                    </WorldContext.Provider>\r\n                </HashRouter>\r\n            </DndProvider>\r\n        </>\r\n    );\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './style/index.scss';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './firebase';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}